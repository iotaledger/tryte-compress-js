!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).IotaCompress={})}(this,(function(t){"use strict";var e={65:{bits:4,length:4},66:{bits:30,length:5},67:{bits:1,length:4},68:{bits:31,length:5},69:{bits:29,length:5},70:{bits:28,length:5},71:{bits:18,length:5},72:{bits:24,length:5},73:{bits:23,length:5},74:{bits:16,length:5},75:{bits:17,length:5},76:{bits:19,length:5},77:{bits:1,length:5},78:{bits:25,length:5},79:{bits:21,length:5},80:{bits:27,length:5},81:{bits:10,length:5},82:{bits:26,length:5},83:{bits:2,length:4},84:{bits:20,length:5},85:{bits:11,length:5},86:{bits:15,length:5},87:{bits:22,length:5},88:{bits:13,length:5},89:{bits:12,length:5},90:{bits:14,length:5},57:{bits:3,length:4},49:{bits:1,length:6},50:{bits:1,length:7},51:{bits:1,length:8},95:{bits:0,length:8}},r=[{},{},{},{},{2:65,8:67,4:83,12:57},{15:66,31:68,23:69,7:70,9:71,3:72,29:73,1:74,17:75,25:76,16:77,19:78,21:79,27:80,10:81,11:82,5:84,26:85,30:86,13:87,22:88,6:89,14:90},{32:49},{64:50},{128:51,0:95}];function n(t,e){for(var r=0,n=t[0],i=1,o=1;o<t.length;o++)t[o]!==n?(r=s(e,r,i,n),i=1,n=t[o]):i++;return s(e,r,i,n)}function i(t){for(var e=[],r=0;r<t.length;r++)49===t[r]?(f(e,t[r+2],t[r+1]),r+=2):50===t[r]?(f(e,t[r+3],t[r+1],t[r+2]),r+=3):51===t[r]?(f(e,t[r+4],t[r+1],t[r+2],t[r+3]),r+=4):e.push(t[r]);return Buffer.from(e)}function s(t,e,r,n){var i=e;if(1===r)t.writeUInt8(n,i++);else{for(var s=r;s>=3;){var f=Math.min(19682,s);i=o(t,i,n,f),s-=f}if(s>0)for(var h=0;h<s;h++)t.writeUInt8(n,i++)}return i}function o(t,e,r,n){var i=e;if(n<=26)t.writeUInt8(49,i++),t.writeUInt8(0===n?57:n+64,i++);else if(n<=728){var s=(n-(o=n%27))/27;t.writeUInt8(50,i++),t.writeUInt8(0===o?57:o+64,i++),t.writeUInt8(0===s?57:s+64,i++)}else{var o,f=(n-27*(s=(n-(o=n%27))/27%27)-o)/729;t.writeUInt8(51,i++),t.writeUInt8(0===o?57:o+64,i++),t.writeUInt8(0===s?57:s+64,i++),t.writeUInt8(0===f?57:f+64,i++)}return t.writeUInt8(r,i++),i}function f(t,e,r,n,i){var s=57===r?0:r-64;void 0!==n&&(s+=27*(57===n?0:n-64)),void 0!==i&&(s+=27*(57===i?0:i-64)*27);for(var o=0;o<s;o++)t.push(e)}function h(t){if(null==t||0===t.length)throw new Error("There is no data to compress");if(!Buffer.isBuffer(t))throw new Error("The trytes must be a Buffer, use compressTrytes for string");var r=Buffer.alloc(t.length+1),i=n(t,r);r[i++]=95;for(var s=Buffer.alloc(i),o=0,f=0,h=0,l=0;l<i;l++)for(var u=e[r[l]],g=u.length-1;g>=0;g--)f|=(u.bits>>g&1)<<h,8===++h&&(s.writeUInt8(f,o++),h=0,f=0);return h>0&&s.writeUInt8(f,o++),s.slice(0,o)}function l(t){if(null==t||0===t.length)throw new Error("There is no data to decompress");if(!Buffer.isBuffer(t))throw new Error("The bytes must be a Buffer");for(var e=[],n=0,s=!1,o=0;!s;){for(var f=0,h=0;!r[h][f];)f|=(t[n]>>o&1)<<h,h++,8===++o&&(n++,o=0);var l=r[h][f];95===l?s=!0:e.push(l)}return i(e)}t.compress=h,t.compressTrytes=function(t){if(!/^[ABCDEFGHIJKLMNOPQRSTUVWXYZ9]*$/.test(t))throw new Error("You can only compress trytes with the algorithm.");for(var e=Buffer.alloc(t.length),r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return h(e)},t.decompress=l,t.decompressTrytes=function(t){for(var e=l(t),r="",n=0;n<e.length;n++)r+=String.fromCharCode(e[n]);return r},t.runLengthDecode=i,t.runLengthEncode=n,Object.defineProperty(t,"__esModule",{value:!0})}));
